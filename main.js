(()=>{"use strict";console.log("app started"),(new class{constructor(){this.sse=new EventSource("https://ahj-ws-or.herokuapp.com/sse"),this.textlog=document.querySelector(".textlog-logging")}events(){this.eventSource()}eventSource(){this.sse.addEventListener("comment",(e=>{const t=JSON.parse(e.data);t.fullMatch?this.fullMatch(t.fullMatch):t.events&&"Матч завершился"!==t.events.text?this.addLog(t.events):"Матч завершился"===t.events.text&&this.sse.close()})),this.sse.addEventListener("open",(()=>{console.log("connected")})),this.sse.addEventListener("error",(()=>{console.log("error"),this.sse.close()}))}fullMatch(e){for(let t=0;t<e.length;t+=1)this.addLog(e[t])}addLog(e){const t=document.createElement("div"),s=document.createElement("div"),n=document.createElement("span"),o=document.createElement("span"),l=document.createElement("span");n.textContent=e.date,"freekick"===e.type?o.classList.add("freekick"):"goal"===e.type?o.classList.add("goal"):o.classList.add("action"),l.classList.add("text"),s.classList.add("event"),l.textContent=e.text,t.appendChild(o),s.appendChild(n),s.appendChild(l),t.appendChild(s),t.classList.add("log"),this.textlog.appendChild(t),this.textlog.scrollTop=this.textlog.scrollHeight}}).events()})();